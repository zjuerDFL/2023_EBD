# 实验3: 自行车码表

!!! danger "本实验尚未发布，内容随时可能发生变化"

<div style="display:none">

这个实验的目的是掌握如何在MCU上编写裸机程序，掌握中断响应程序的编程方式，理解前后台程序的编程模式。

本实验配有[实验指南](lab3_guide.md)。

## 配合课程

第三次：嵌入式编程模型

## 实验目的

1. 了解嵌入式裸机编程模型的一般情况；
2. 熟练掌握前后台编程模型；
3. 熟练掌握引脚中断响应程序编程方法；
4. 掌握中断驱动编程模型。

## 实验器材

### 硬件

采用和实验2相同的硬件，增加按钮1个。

### 软件

采用和实验2相同的软件。

## 实验步骤

1. 通过面包板在PA11和PA12各连接一个按钮开关到地；
2. 编写前后台程序，以中断处理时钟定时器和其中一个按钮（模拟钢圈计数），以主循环读取按钮的变化值并根据定时的值做输出，第二个按钮（模拟模式切换）由主程序轮询判断，用以改变输出的数据（速度还是里程）。程序通过串口输出；
3. 编写中断驱动模式程序，以中断处理时钟定时器和两个一个按钮（模拟钢圈计数），主程序循环中不做事情。

## 扩展内容

1. 用定时器的外部触发来测量时间。
2. 用动态队列模式编写程序，中断响应程序里将对应的函数指针加入动态队列，主函数遍历队列来执行。

## 实验报告要求

1. 画出你所实际实施的连接示意图；
2. 给出实际拍摄的板卡连接照片；
3. 给出所用的器材的列表；
4. 给出源代码和说明；
5. 给出串口输出的屏幕截图；
6. 说明其他所做的扩展内容的情况。

</div>