# 实验7: 字母板

!!! danger "本实验尚未发布，内容随时可能发生变化"

这个实验的目的是掌握在嵌入式Linux中如何使用已有的函数库编写应用程序操纵GPIO，如何编写字符设备驱动程序在内核程序中使用GPIO，并学习用面包板搭简单的外部设备电路的方法，掌握Linux网络程序和多线程程序的编写，实现一个网络访问的LED矩阵显示器。

<div style="display:none">

本实验配有[实验指南](lab7_guide.md)。

## 实验目的

1. 学习嵌入式Linux的内核GPIO库函数的使用方式；
2. 学习Linux设备驱动程序的开发过程。

## 实验器材

### 硬件

- Linux实验板卡1块；
- 5V/1A电源1个；
- microUSB线1根；
- 面包板1块；
- SPI接口8x8 LED矩阵1个；
- 面包线若干。

### 软件

- 编译软件等。

## 实验步骤

1. 设计方案，画连线示意图；
2. 在面包板上连线，完成外部电路；
3. 编写C程序，采用Arduino-ish库或虚拟文件系统访问GPIO，实现在矩阵上显示文字或图案；
4. 编写字符设备驱动程序，通过内核GPIO库访问引脚，能将`write()`送来的单个字符在矩阵上显示出来；
5. 编写Linux应用程序，能通过MQTT协议连接自己MQTT broker，将订阅收到的文字在LED矩阵上流动显示出来；
6. 在5的基础上实现实验6的DHT-11的数据发布到自己的MQTT broker上后显示在LED矩阵上。

## 自选扩展内容

1. 设备驱动程序能将`write()`送来的字符串以每个字母停留500ms的速度依次显示；
2. 1中的`write()`函数是非阻塞类型的，每500ms一个字符的显示是由内核定时器队列实现的。

## 实验报告要求

1. 画出你所实际实施的连接示意图；
2. 给出所用的器材的列表；
3. 描述所做的实验步骤，给出各步操作的命令和结果；
4. 说明所用的GPIO库的来源；
5. 给出代码并解释；
6. 说明其他所做的扩展内容的情况。

</div>